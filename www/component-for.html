<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<template id="t1">
    <div data-for="xyz in scope.data">
        Repeat {{ xyz }}
    </div>


</template>

<script>

    class KElem {

        constructor(te, parent)
        {
            this.te = te;
            this.parent = parent;
        }

        eexpand(expr, scope, state)
        {

        }


        remove() {

        }

        render(scope, state) {

        }
    }

    class KElemFor {


        _render(index, state) {

        }

        update(scope, state) {
            let index = 0;
            eval("for(state.data in scope.somename) { this._render(index, state); index++; }");

            for (; index < this.elements.lenght; index++) {
                this.elements[index].remove();
            }
        }

    }

    class KTpl extends KElem {

    }


    class KCompile extends HTMLElement {




        _compileRecursive(node, kelem) {
            if (node.hasAttribute("for")) {
                let ck = new KElemFor()
                kelem.addChild(ck);
            }

        }


        compile (template) {
            let tpl = new KTpl();

        }

    }

    customElements.define("data-for", DataFor, {extends: 'p'});

</script>

</body>
</html>